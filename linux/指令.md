# 文件权限

```bash
# 给文件、目录设置读取、写入、执行权限
chmod -options filename : chmod 777 filename 
7: 对应 rwx 每位都是1
本人:本角色组:其他角色
```



# 文件操作

```bash
#下载文件，并制定文件下载位置
sudo curl -L https://github.com/docker/compose/releases/download/1.21.2/docker-compose-$(uname -s)-$(uname -m) -o /usr/local/bin/docker-compose

#上传文件到linux服务器的指定位置
sudo scp /Users/mac/IdeaProjects/machine-monitor/machine-monitor-webapp/target/machine-monitor-webapp-0.0.1-SNAPSHOT.jar  root@47.96.235.128:/workspace/java/machine-monitor-webapp


sudo scp saas@10.111.3.51:/qjyd/log/appraisal/gc-2024-10-22_19-37-19.log /Users/peilizhi

sudo scp -P 3232 appraisal@10.111.8.167:/qjyd/log/appraisal/gc-2024-10-23_19-55-04.log  /Users/peilizhi


ls
#列出目录下的文件。`-l`列出“长格式”的文件，其中包含文件的确切大小，拥有该文件的人员，有权查看该文件，以及何时进行上次修改。`-a`列出所有文件，包括隐藏文件。

#创建或更新您的文件。
touch

#将文件从一个位置移动到另一个位置。 在同一目录下就是重命名
mv filename1 filename2

#将 file 文件移动到 one 目录下
mv filename1 /one/filename2

#把 filename1 文件拷贝到 one 目录下，并且文件名为filename2
cp filename1 /one/filename2

cp -r dictory  one_dictory  将这个目录下的内容移到另一个目录下 


#删除文件。
rm filename1

#为了删除目录，使用`-rf`去递归删除目录中的所有内容。
rm  -rf dictory    


#压缩文件
gzip  filename1.txt       : 会生成filename1.txt.gz 同时删除filename1.txt
gzip  -k filename1.txt		: 保留原始文件

#解压文件
gunzip filename1.txt.gz		: 会生成filename1.txt 同时删除filename1.txt.gz
gunzip -k filename1.txt.gz		: 会生成filename1.txt 不删除filename1.txt.gz


#tar 可以压缩也可以解压
tar [ops] xx.tar.gz  [file | dictory]
ops:
 -z	 解压或者压缩 .gz文件
 -x  解压一个压缩文件
 -c  创建一个压缩文件
 -t  查看压缩包里面的文件  [ -x , -c -f 只能重新一个]
 -v  过程中显示文件
 -f  制定压缩后的文件名
 
 #压缩多个文件，将 /home/a1.txt 和 /home/a2.txt 压缩成 a.tar.gz
 tar -zcvf a.tar.gz  /home/a1.txt /home/a2.txt
 # 将 /home 文件夹压缩 压缩成 myhome.tar.gz
 tar -zcvf myhome.tar.gz /home/
 # 将 a.tar.gz 解压到当前目录
 tar -zxvf a.tar.gz
 # 将myhome.tar.gz解压到 /opt/ 目录下
 tar -zxvf myhome.tar.gz /opt/
```

# 文件查看

```sh
more
显示文件的第一部分（用空格移动并键入q以退出）。

cat
可以查看多个文件，会依次输出到屏幕上   可以将多个文件的内容输出重定向到另一个文件上
cat filename
cat file1 file2 
cat file1 file2 > newcombinedfile

head  
head -n xxx.txt 显示文件的前n行

tail
tail -500f xx.txt. 动态展示文件的后500行


比较文件，并列出他们的差异。
diff filename1 filename2

显示每行的唯一项
sort example.txt | uniq -c

只显示example.txt的唯一行（首先你需要排序，否则看不到重叠）*
sort example.txt | uniq

# 根据时间查询日志
sed -n '/2024-12-03T17:15:00/,/2024-12-03T17:30:00/p'  gc-2024-12-03_17-33-20.log

# 获取这段时间内的日志，结果只会收集有时间戳的，正常日志不会有
awk '$0 ~ /2025-02-18T15:3[2-5]/' gc-2025-02-18_11-12-35.log

# 查询这段区间内所有的日志，包括没有时间戳的
grep -E '2025-02-25 12:0[0-5]' -A 100 xrxs-appraisal-2025-02-25-3.log


# 查询这段区间内指定日志，回收时间，回收情况，包括没有时间戳的
grep -E '2025-02-18T15:3[2-5]' -A100 gc-2025-02-18_11-12-35.log | grep -E 'GC pause|Eden'


grep -E '2025-03-10T16:1[0-8]' -A100 gc-2025-03-07_19-29-42.log | grep -E 'GC pause|Eden'


排序文本文件的行
sort example.txt

查找文件内的文本。您可以使用grep搜索与一个或多个正则表达式匹配的文本行，并仅输出匹配的行。
grep pattern filename
`-i`选项强制grep忽略单词大小写。
`-r`可用于搜索指定目录下的所有文件
grep -w 'vivek|priyanka' /etc/passwd

从目录下所有文件中查询某一个单词
grep -R 'main' *   最后一个参数是文件目录
```



# 防火墙

```sh
# 备份数据库并压缩
mysqldump -u${DATA_USER} -p${DATA_PWD}  --host=$HOST $DATA_DB | gzip  > $DB_PATH/$DATATIME/$DATATIME.sql.gz

# 没有目录就创建目录
[ ! -d "$DB_PATH/$DATATIME"  ] && mkdir -p "$DB_PATH/$DATATIME"


/usr/bin/mysql sudo find / -name nginx -type d   在根目录下查找名为nginx的目录 


查看防火墙状态
sudo systemctl status firewalld

开启防火墙
sudo systemctl start firewalld

关闭防火墙
sudo systemctl stop firewalld

查看当前firewall状态
sudo firewall-cmd --state

重启firewall
sudo firewall-cmd --reload

禁止开机启动
sudo systemctl disable firewalld.service
 
查看已经开放的端口：
sudo firewall-cmd --list-ports

开启端口
sudo firewall-cmd --zone=public --add-port=9411/tcp --permanent
```



# 下载

```sh
# 列出所有可更新的软件清单命令：
yum check-update

# 更新所有软件命令
yum update

# 仅安装指定的软件命令：
yum install <package_name>

# 仅更新指定的软件命令：
yum update <package_name>

# 列出所有可安裝的软件清单命令
yum list

# 列出所有已经安装的软件
yum list installed ｜ grep java*

# 卸载  当安装过程提示选择全部为 "yes"
yum -y remove 

# 查看信息
yum info <package_name>
```

```
sed -n '/2025-01-02 15:01:00/,/2025-01-02 15:05:00/p'  xrxs-waves-sql.log.2025-01-02-1
```
