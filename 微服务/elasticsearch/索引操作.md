# HTTP API

elasticsearch 支持restful 的的请求，请求方式分为：GET、POST、PUT、DELETE,，默认情况的之后本机才能访问RESTful ,

在elasticsearch.yaml 中修改可以支持主机访问别的主机服务。

```
http.host: 0.0.0.0
transport.host: 127.0.0.1
```

其中GET、PUT具有幂等性，也就是执行多次结果是一样的。

GET： 查询、POST: 修改 、PUT: 新增   DELETE: 删除

**http://ip:host/索引/具体操作类型/id**

具体操作类型：_doc（文档） _search(查询)

## 创建索引

PUT http://localhost:9200/索引

```
PUT http://localhost:9200/shopping3
```

acknowledged=true表示创建成功

```json
{
    "acknowledged": true,
    "shards_acknowledged": true,
    "index": "shopping3"
}
```

再次执行的时候会失败，因为索引已经创建啦，不能重复创建

```json
{
    "error": {
        "root_cause": [
            {
                "type": "resource_already_exists_exception",
                "reason": "index [shopping2/jgoNdfq2QIOsz9ndW_NmJg] already exists",
                "index_uuid": "jgoNdfq2QIOsz9ndW_NmJg",
                "index": "shopping2"
            }
        ],
        "type": "resource_already_exists_exception",
        "reason": "index [shopping2/jgoNdfq2QIOsz9ndW_NmJg] already exists",
        "index_uuid": "jgoNdfq2QIOsz9ndW_NmJg",
        "index": "shopping2"
    },
    "status": 400
}
```

## 获取索引

查询单个索引

GET  http://localhost:9200/索引

```
GET  http://localhost:9200/shopping3
```

```json
{
    "shopping3": {
        "aliases": {},
        "mappings": {},
        "settings": {
            "index": {
                "creation_date": "1658163720288",
                "number_of_shards": "1",
                "number_of_replicas": "1",
                "uuid": "Gkn9DKRPSPqGnCdsRhwTyA",
                "version": {
                    "created": "7100299"
                },
                "provided_name": "shopping3"
            }
        }
    }
}
```

查询所有索引

```
http://localhost:9200/_cat/indices?v
```

```json
health status index                        uuid                   pri rep docs.count docs.deleted store.size pri.store.size
green  open   .kinana_1                    aoDI4V3bTm-qdgzGUH-YtQ   1   0         51           24     69.5kb         69.5kb
green  open   kibana_sample_data_ecommerce _K5JV6AmS6mqWAg-uKiBdw   1   0       4675            0      4.1mb          4.1mb
yellow open   shopping2                    jgoNdfq2QIOsz9ndW_NmJg   1   1          0            0       208b           208b
green  open   .kibana_1                    j2udke0HThiuhH3KxvpkHQ   1   0         14            0     10.2kb         10.2kb
yellow open   shopping3                    Gkn9DKRPSPqGnCdsRhwTyA   1   1          0            0       208b           208b
yellow open   shopping                     tXRCPcpNR26fsea56ERCPg   1   1          0            0       208b           208b

```

## 删除索引

DELETE http://localhost:9200/索引

```
DELETE http://localhost:9200/shopping3

```

```json
{
    "acknowledged": true
}
```



