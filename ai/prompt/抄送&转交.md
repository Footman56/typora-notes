1. 绘制类图

```
+  流程对象
    + 是否转交
+ 抄送配置
    + 方案id
    + 流程id
    + 是否开启抄送
    + 抄送时机
    + 抄送人
+ 抄送消息待办
    + 抄送消息分组id
    + 方案id
    + 环节id
    + 被考核人id
    + 待办人id
根据给定的描述，绘制成类图，以PlantUML 支持的格式
```

复制生成的代码到  https://www.plantuml.com/plantuml/uml/SoWkIImgAStDuU9ApaaiBbPujhNn-Ohkf-jtljYuKA6QIm48j9_DMFzqmh8NUzSysRN4IY4fFpydDJ6FgnQkfQlbPKFZozRUvtlNmRLCs_biOKTcYfL2S4bHPbuwH1HYE48KsVYdUngUJbWFCGjk2KG1HF3Pz6tFvkn2Q4N8FDc544QuQbl7iyRrJ_UrFksQ1tCLH0nXFx9eIML1AamSdn-Uzwr_qTM4BlfYqUeN3StF5km0kWLT3k86g0J2cUeAJritFz-ycmibo9KCbHHqTHMK3FJqj9HGWzPAuMbFwzC9g_5eGFMr5SY65urJkBWSKlDIm94C0000

直接生成类图

2. 绘制时序图

```
基础概念：消息待办代表的含义是方案下操作人对被考核人要进行消息处理。待办人是根据消息来处理考核
请你帮我绘制一个时序图，
时序图交互逻辑是管理员操作时生成消息待办同时发送消息给待办人，消息中有页面的跳转链接，生成跳转链接逻辑是。如果待办人此时有多条消息待办要处理的话跳转到列表页面，否则只有单个消息待办的话进行明细页面
绘制的时序图以PlantUML支持的形式展示出来
```

3. 生成建表语句

```
结合上面绘制的类图，给出建表，数据库采用mysql形式，要求补充字段说明。字段命名需要合理并且采用下下划线格式。生成语句的时候参考下面sql
CREATE TABLE `kpi_assess_electronic_sign` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `head_id` char(32) COLLATE utf8mb4_unicode_ci NOT NULL,
  `company_id` char(32) COLLATE utf8mb4_unicode_ci NOT NULL,
  `plan_id` char(32) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `assess_emp_id` char(32) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '被考核人',
  `flow_id` char(32) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '环节id',
  `inspection_status` tinyint(1) DEFAULT NULL COMMENT '环节类型',
  `fail_reason` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '绩效发起电子合同失败理由',
  `contract_detail_id` char(32) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '合同id',
  `contract_detail_name` char(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '合同名称',
  `current_sign_account` char(32) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '当前签署人id',
  `current_sign_url` varchar(1000) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '电子签署链接',
  `detail_url` varchar(1000) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '电子合同详情链接',
  `download_url` varchar(1000) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '电子合同下载链接',
  `certify_report_download_url` varchar(1000) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '合同出证报告地址',
  `contract_status` tinyint(1) DEFAULT NULL COMMENT '电子合同状态 3-发起中 6-签署完成 8-撤销',
  `start_sign_time` int(11) DEFAULT NULL COMMENT '电子签发起时机',
  `start_sign_type` int(11) DEFAULT NULL COMMENT '电子签发起类型 1-自动 2-手动',
  `is_del` tinyint(4) NOT NULL COMMENT '是否删除',
  `addtime` int(11) DEFAULT NULL COMMENT '创建时间',
  `modtime` int(11) DEFAULT NULL COMMENT '修改时间',
  PRIMARY KEY (`id`),
  KEY `idx_plan_emp` (`plan_id`,`assess_emp_id`) USING BTREE,
  KEY `idx_com_contract_detail` (`company_id`,`contract_detail_id`) USING BTREE
) ENGINE=InnoDB AUTO_INCREMENT=116 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='被考核人电子签'
```

4. 消息流转流程图

```
员工点击消息时携带消息id、消息类型。先进入统一接口之后根据统一接口返回的页面进行跳转。
统一接口的逻辑是先查询消息类型，不同的消息类型有不同的跳转策略，消息跳转的策略有很多类型，以抄送消息、待办消息为例。如果是抄送类型的话，就查询根据消息id去查询抄送待办，如果有多条消息待办就进入列表页面，单个消息待办的话就进入到明细页面。如果是别的类型的话，比如待办的话，就固定进入待办页面。根据上面描述绘制流程图，要求流程图需要满足PlantUML 支持的格式
```



5. 生成代码

```
根据sql中的建表语句生成对应的PO、DO ，要求DO中有 由DO转化成PO的方法、由PO转化成DO的方法。
生成Manager、ManagerImpl、Service、ServiceImpl、Mapper。接口中只需要有批量插入方法
生成xml文件，xml文件中有全部字段的映射规则resultMap
实现内容参考上下文中给出的案例
```

**在设置上下文时尽量都罗列出所有需要的Service**

![image-20250211151832212](https://raw.githubusercontent.com/Footman56/images/master/img202502111518971.png)

使用的时候需要配置上下文，简单的方法就是给出对应的对象，让AI进行参考。





```
消息  -> 跳转链接（实际的页面）
消息  -> 后端接口 -> 跳转链接 
h5、 pc端的
```



5. 编写定时任务

   <img src="https://raw.githubusercontent.com/Footman56/images/master/img202502141110010.png" alt="image-20250214111009943" style="zoom:50%;" />

```
需求：实现物理删除kpi_calibration_assessee_record表中is_del=1的数据，暂时不需要查询条件.
说明：实现方式是通过Service类调用manager类。Service类是上下文中类名含有Service的类，Manager是上下文中类名含有Manager的类 要求：新增的代码都在上下文中，具体的实现方法参考上下文中方法名称、方法实现参考，注：Manager实现的时候尽量使用Example，不用采用xml形式。
使用tk-mybatis框架，并且代码简洁，补充适当的注释
```



KpiPlanAutoRefreshCalibrationHandle

```
需求：创建新的定时任务每月去删除kpi_calibration_round_group、kpi_calibration_assessee_record、kpi_calibration_assessee_relation数据
说明：调用上下文中物理删除方法
要求：具体代码实现参考KpiPlanAutoRefreshCalibrationHandle，代码简洁，补充适当的日志
```


