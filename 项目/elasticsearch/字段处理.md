1. 新增 `nested` 字段并填充数据

   ```
   PUT your_index/_mapping
   {
     "properties": {
       "customFieldsNested": {
         "type": "nested",
         "properties": {
           "customFieldId": { "type": "keyword" },
           "fieldValue": { "type": "keyword" },
           "labelName": { "type": "text" }
         }
       }
     }
   }
   ```

2. 使用 `_update_by_query` 解析 `text` 并填充 `nested`

   ```
   POST your_index/_update_by_query
   {
     "script": {
       "source": """
         if (ctx._source.containsKey("customFields") && ctx._source.customFields != null) {
           try {
             def parsedJson = new ArrayList();
             parsedJson = params.parser.parse(ctx._source.customFields, List.class);
             ctx._source.customFieldsNested = parsedJson;
           } catch (Exception e) {
             // 解析失败时，保留原数据
             ctx._source.customFieldsNested = [];
           }
         }
       """,
       "lang": "painless",
       "params": {
         "parser": "com.fasterxml.jackson.databind.ObjectMapper"
       }
     }
   }
   ```

3. 查询 `nested` 字段

   ```
   GET your_index/_search
   {
     "query": {
       "nested": {
         "path": "customFieldsNested",
         "query": {
           "bool": {
             "must": [
               { "term": { "customFieldsNested.customFieldId": "fb5f214e5c7f11eca587b8599fe80640" } },
               { "term": { "customFieldsNested.fieldValue": "113" } }
             ]
           }
         }
       }
     }
   }
   ```

   ```
   GET your_index/_search
   {
     "query": {
       "bool": {
         "should": [
           {
             "nested": {
               "path": "customFieldsNested",
               "query": {
                 "bool": {
                   "must": [
                     { "term": { "customFieldsNested.customFieldId": "fb5f214e5c7f11eca587b8599fe80640" } },
                     { "term": { "customFieldsNested.fieldValue": "113" } }
                   ]
                 }
               }
             }
           },
           {
             "nested": {
               "path": "customFieldsNested",
               "query": {
                 "bool": {
                   "must": [
                     { "term": { "customFieldsNested.customFieldId": "fb5fb1725c7f11eca587b8599fe80640" } },
                     { "term": { "customFieldsNested.fieldValue": "汗" } }
                   ]
                 }
               }
             }
           }
         ],
         "minimum_should_match": 1
       }
     }
   }
   ```

   