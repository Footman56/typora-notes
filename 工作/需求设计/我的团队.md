绩效-我的团队

1. 周期组件筛选

   ```json
   GET /appraisal_kpi_assessee_v6/_search
   {
     "size": 0,
     "query": {
       "bool": {
         "must": [
           {
             "term": {
               "companyId": {
                 "value": "827ca94aec3347df87836ef9f24bc4ed",
                 "boost": 1
               }
             }
           },
           {
             "term": {
               "employeeId": {
                 "value": "c9652ffe3d5d44d78ebd607a604848ae",
                 "boost": 1
               }
             }
           }
         ],
         "adjust_pure_negative": true,
         "boost": 1
       }
     },
     "version": true,
     "aggs": {
       "group_by_planYear": {
         "terms": {
           "field": "planYear",
           "size": 10,
           "order": {
             "_key": "desc"
           }
         },
         "aggs":{
           "group_by_plan_period":{
             "terms": {
               "field": "planPeriod",
               "size": 40
             }
           }
         }
       }
     }
   }
   ```

   

2. 图表下所有等级

   ```json
   GET /appraisal_kpi_assessee_v6/_search
   {
     "size": 0,
     "query": {
       "bool": {
         "filter": [
           {
             "term": {
               "companyId": {
                 "value": "827ca94aec3347df87836ef9f24bc4ed",
                 "boost": 1
               }
             }
           },
           {
             "term": {
               "employeeId": {
                 "value": "c9652ffe3d5d44d78ebd607a604848ae",
                 "boost": 1
               }
             }
           },
           {
             "term": {
               "planYear": {
                 "value": 2023
               }
             }
           },
           {
             "terms": {
               "planPeriod": [
                 1,
                 2
               ]
             }
           }
         ]
       }
     },
     "version": true,
     "aggs": {
       "group_by_plan_period": {
         "terms": {
           "field": "planPeriod",
           "size": 40
         },
         "aggs": {
           "group_by_final_level": {
             "terms": {
               "field": "finalLevel",
               "size": 10
             }
           }
         }
       }
     }
   }
   ```

3. 图表下所有等级排序

   ```json
   GET /appraisal_kpi_assessee_v6/_search
   {
     "size": 0,
     "query": {
       "bool": {
         "filter": [
           {
             "term": {
               "companyId": {
                 "value": "827ca94aec3347df87836ef9f24bc4ed",
                 "boost": 1
               }
             }
           },
           {
             "term": {
               "employeeId": {
                 "value": "c9652ffe3d5d44d78ebd607a604848ae",
                 "boost": 1
               }
             }
           },
           {
             "term": {
               "planYear": {
                 "value": 2023
               }
             }
           },
           {
             "terms": {
               "planPeriod": [
                 1,
                 2
               ]
             }
           }
         ]
       }
     },
     "version": true,
     "aggs": {
       "group_by_level": {
         "terms": {
           "size": 50,
           "field": "finalLevel",
           "order": [
             {
               "min_level_operate":"asc"
             },{
               "max_plan_start":"desc"
             }
           ]
         },
         "aggs": {
           "min_level_operate": {
             "min": {
               "field": "levelOperate"
             }
           },
           "max_plan_start": {
             "max": {
               "field": "planStartTime"
             }
           }
         }
       }
     }
   }
   ```

   4. 列表数据

      ```json
      GET /appraisal_kpi_assessee_v6/_search
      {
        "size": 10,
        "query": {
          "bool": {
            "filter": [
              {
                "term": {
                  "companyId": {
                    "value": "827ca94aec3347df87836ef9f24bc4ed",
                    "boost": 1
                  }
                }
              },
              {
                "term": {
                  "employeeId": {
                    "value": "c9652ffe3d5d44d78ebd607a604848ae",
                    "boost": 1
                  }
                }
              },
              {
                "term": {
                  "planYear": {
                    "value": 2023
                  }
                }
              },
              {
                "terms": {
                  "planPeriod": [
                    1,
                    2
                  ]
                }
              },
              {
                "terms": {
                  "finalLevel": [
                    "A",
                    "B"
                  ]
                }
              }
            ]
          }
        }
      }
      ```

      
