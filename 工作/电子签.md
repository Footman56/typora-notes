```
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Report</title>
    <style>
        table {
            width: 100%;
            border-collapse: collapse;
        }
        table, th, td {
            border: 1px solid black;
        }
        th, td {
            padding: 8px;
            text-align: left;
        }
        th {
            background-color: #f2f2f2;
        }
    </style>
</head>
<body>
    <div th:if="${#fields.has('personal')}">
        <h2>Personal Information</h2>
        <table>
            <tr>
                <th>Name</th>
                <th>Employee ID</th>
                <th>Position</th>
            </tr>
            <tr>
                <td th:text="${personalInfo.name}"></td>
                <td th:text="${personalInfo.employeeId}"></td>
                <td th:text="${personalInfo.position}"></td>
            </tr>
        </table>
    </div>

    <div th:if="${#fields.has('indicator')}">
        <h2>Indicator Information</h2>
        <table>
            <tr>
                <th>Indicator Name</th>
                <th>Field 1</th>
                <th>Field 2</th>
                <th>Field 3</th>
            </tr>
            <tr th:each="indicator : ${indicatorInfo}">
                <td th:text="${indicator.indicatorName}"></td>
                <td th:text="${indicator.field1}"></td>
                <td th:text="${indicator.field2}"></td>
                <td th:text="${indicator.field3}"></td>
            </tr>
        </table>
    </div>

    <div th:if="${#fields.has('communication')}">
        <h2>Communication Records</h2>
        <table>
            <tr>
                <th>Communicator</th>
                <th>Content</th>
            </tr>
            <tr th:each="record : ${communicationRecords}">
                <td th:text="${record.communicator}"></td>
                <td th:text="${record.content}"></td>
            </tr>
        </table>
    </div>

    <div th:if="${#fields.has('result')}">
        <h2>Result Information</h2>
        <table>
            <tr>
                <th>Score</th>
                <th>Level</th>
                <th>Coefficient</th>
            </tr>
            <tr>
                <td th:text="${resultInfo.score}"></td>
                <td th:text="${resultInfo.level}"></td>
                <td th:text="${resultInfo.coefficient}"></td>
            </tr>
        </table>
    </div>
</body>
</html>
```



```
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-thymeleaf</artifactId>
</dependency>
<dependency>
    <groupId>org.xhtmlrenderer</groupId>
    <artifactId>flying-saucer-pdf-itext5</artifactId>
    <version>9.1.22</version>
</dependency>
```

```java
@RestController
public class ReportController {
    @Autowired
    private PersonalInfoService personalInfoService;
    @Autowired
    private IndicatorInfoService indicatorInfoService;
    @Autowired
    private CommunicationRecordService communicationRecordService;
    @Autowired
    private ResultInfoService resultInfoService;
    @Autowired
    private TemplateEngine templateEngine;

    @GetMapping("/download-report")
    public void downloadReport(HttpServletResponse response) {
        PersonalInfo personalInfo = personalInfoService.getPersonalInfo();
        List<IndicatorInfo> indicatorInfoList = indicatorInfoService.getIndicatorInfo();
        List<CommunicationRecord> communicationRecords = communicationRecordService.getCommunicationRecords();
        ResultInfo resultInfo = resultInfoService.getResultInfo();

        Context context = new Context();
        context.setVariable("personalInfo", personalInfo);
        context.setVariable("indicatorInfo", indicatorInfoList);
        context.setVariable("communicationRecords", communicationRecords);
        context.setVariable("resultInfo", resultInfo);

        String html = templateEngine.process("report", context);
        try {
            OutputStream outputStream = response.getOutputStream();
            response.setContentType("application/pdf");
            response.setHeader("Content-Disposition", "attachment; filename=report.pdf");

            Flying Saucer flyingSaucer = new FlyingSaucer();
            flyingSaucer.exportToPdf(html, outputStream, getPdfConfiguration());
            outputStream.close();
        } catch (IOException | FOPException e) {
            e.printStackTrace();
        }
    }

    private ITextRenderer getPdfConfiguration() {
        ITextRenderer renderer = new ITextRenderer();
        renderer.setDocumentFromString("<div>HTML Content</div>");
        renderer.getSharedContext().setProducer("Spring Boot Thymeleaf Example");
        return renderer;
    }
}
```



```
KpiElectronicSignFieldSettingDO 对象描述的是勾选了哪些字段，fieldName 用于在页面上展示 fieldKey用于与KpiElectronicSignDetailDO关联

KpiElectronicSignDetailDO 中的baseIndoFields 表示基础信息，如果baseIndoFields不为空话，说明勾选了基础信息。基础信息内容吧页面展示逻辑为baseIndoFields中字段 通过fieldKey的值与aseInfo中属性名称一致，展示的值就是属性的值

KpiElectronicSignDetailDO 中的groupFields 表示维度字段，如果groupFields不为空话，说明勾选了维度信息。维度信息的值存在于groups
页面展示逻辑为遍历groups中字段，固定展示 groupName、groupWeight 两个字段。groupName为维度名称、groupWeight为维度权重 groupWeight 不为空时才展示。
targets属性表示指标信息，如果targets不为空的时候需要展示指标信息
指标信息固定展示targetName、targetWeight。targetName为指标名称、targetWeight为指标权重 targetWeight不为空时才展示。items表示指标字段，
items 表示指标字段信息，items不为空时才展示，展示逻辑为groupFields中的fieldKey 与 items 中的fieldKey 一一对应，如果items的fieldKey 存在于 groupFields中fieldKey就展示，展示的是值为filedValue

mixFields 表示综合评价字段，如果mixFields不为空话，说明勾选了综合评价字段。 mixs 为综合评价内容，页面展示逻辑 遍历mixs， 如果mixFields中字段通过fieldKey的值与mixs中属性名称一致，展示的值就是属性的值


检查KpiEmpElectronicSignDetailDO 中的targetEvaluationFields 字段是否包含fieldKey = targetScore 的，如果包含展示 <div class="item-score"> <span th:text="${evaluation.score}"></span> </div>


根据上面罗列的规则，请编写thymeleaf页面
```









```
<div th:if="${#lists.isEmpty(detailDO.targetEvaluationFields) == false}">
    <div th:each="field : ${detailDO.targetEvaluationFields}" th:if="${field.fieldKey == 'targetScore'}">
        <div class="item-score">
            <span th:text="${field.score}"></span>
        </div>
    </div>
</div>

```

