![image-20241016220659997](https://gcore.jsdelivr.net/gh/Footman56/imageBeds/202410162207038.png)



参数控制：

+ -Xms:  堆最小容量
+ -Xmx: 堆最大容量
+ -Xss:  线程栈占用的大小 ， 默认1M

+ -XX: MetaspaceSize=18M ： 设置元空间大小，如果元空间太小的话，加载的类超过该值时会触发full gc。如果释放了大量空间的话会自动调小该值

+ -XX: MaxMetaspaceSize  默认-1 不限制， 一般-XX: MetaspaceSize 与-XX: MaxMetaspaceSize 设置一样大，8G机器内存，设置 256M



GcRoot: 方法的局部变量都是，并且局部变量引用的也是，这种算作可达，不回收





为什么需要STW:

因为如果不设置STW的话，在判断GCRoot的时候 一个线程正在执行，此时不回收，但是线程执行完之后是需要回收的，但是因为之前判断的是不回收，就会影响回收效率