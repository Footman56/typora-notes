# 一、适用点

```
单例模式是只创建一个实例，外界不能通过new来访问
```

# 二、实现方式

```
饿汉式：直接创建，加载类的时候就创建对象
	线程安全，内存开销大、高效
懒汉式：在使用对象的时候创建。
```

## 2.1 饿汉式（一）

```java
静态对象
class  Singleton{
    //私有化构造方法，可避免外部使用new方法创建
    private Singleton(){
    }
    //在类加载的时候创建
    private static final Singleton singleton=new Singleton();
    //提供共有接口
    public static Singleton getSingleton(){
        return singleton;
    }
}
```

# 2.1 饿汉式（二）

```java
饿汉式（静态代码块）：线程安全，高效，内存开销大
class  Singleton{
    //私有化构造方法，可避免外部使用new方法创建
    private Singleton(){
    }
    //在类加载的时候创建
    private static Singleton singleton;
    //静态代码块中创建变量
    static {
        singleton=new Singleton();
    }
    //提供共有接口
    public static Singleton getSingleton(){
        return singleton;
    }
}
```

# 2.2 懒汉式(一)

```
懒汉式：线程不安全、简单
class Singleton{
    private static Singleton singleton;
    private Singleton(){
    }
    public static Singleton getSingleton(){
        if (singleton==null){
            return new Singleton();
        }else{
            return singleton;
        }
    }
}
```

# 2.3 懒汉式（二）

```java
懒汉式：线程安全，低效
class Singleton{
    private static Singleton singleton;
    private Singleton(){
    }
    public static synchronized Singleton getSingleton(){
        if (singleton==null){
            return new Singleton();
        }
        return singleton;
    }
}

```

# 2.4 懒汉式（三）

```java
懒汉式（双重检查）：高效，线程安全
class Singleton{
    //volatile关键字保证在变量变化时，刷新内存
    private static volatile Singleton singleton;
    private Singleton(){
    }
    //双重检查
    public static  Singleton getSingleton(){
        if (singleton==null){//两个线程同时进入时，一个线程修改完后更新变量，另一个不满足条件，直接退出
            synchronized (Singleton.class){
                if(singleton==null){
                    return new Singleton();
                }
            }
        }
        return singleton;
    }
}

```

# 2.5 懒汉式（四）

```java
懒汉式（静态内部类）
class Singleton{
    private Singleton(){
    }
    //静态内部类(在虚拟机上类加载是线程安全的)
    private static class SingletonInstance{
        private static final Singleton INSTANCE=new Singleton();
    }
    public static Singleton getSingleton(){
        return SingletonInstance.INSTANCE;
    }
}
```

# 2.6枚举

```java
枚举类：简单
适合类方法少的时候
enum Singleton{
    SINGLETON;
    public void say(){
        System.out.println("ndvnsjv");
    }
}
```



