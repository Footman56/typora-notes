union all 比 union 性能好，但是会有重复的

![image-20260228110349327](https://raw.githubusercontent.com/Footman56/images-2/master/img202602281103374.png)





深度分页怎么优化：

1. 按需查询字段，减少IO 消耗
2. 查询字段尽量保证索引覆盖，减少回表
3. 借助nodal缓存来 缓解mysql 数据库压力
4. 借助id 范围来优化



优先使用datetime 来保持日期和时间，存储范围大，并且和时区无关



mysql 选RR 隔离级别？

1. 主从复制时，通过binlog 日志来完成数据同步的， 从库执行sql的时候的结果会与主库有些区别（不同mysql的采样预估导致执行过程不一样）。可重复读的间隙锁和记录锁能避免事务乱序问题。

大厂改成RC

+ 实时性需求：RC 每次都是读最新的
+ 减少死锁：RR 会加间隙锁和记录锁
+ 简化主从复制 ，RC 使用行式binlog
+ 提高并发性能：RC锁的力度小



not in 问题

1. 索引失效
2. 不会返回null 的记录

