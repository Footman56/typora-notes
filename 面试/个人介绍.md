# 个人介绍

面试官，你好，我是裴立志。我面试的是java后端工程师，我 精通的技能有springboot ，多线程， dubbo（为其他业务模块提供服务，同时也引用其他服务），

mysql、redis、elasticsearch、mongodb 数据库 并有数据库调优经验。（mysql 索引三个字段a,b,c 实际查询使用的是b,c，修改查询语句的。es调优：使用filter代替bool 查询，bool会计算分数，实际不需要只返回查询结构就可以啦。同时仅返回需要的字段） 

消息队列精通 rabbitmq ，

了解过分布式缓存，security安全框架



介绍项目经验

解决过 服务器内存压力告警，排除原因是慢sql 导致大量数据加载到内存中，解决方式是优化查询语句，增加更多的限制条件。

内存占比达到75%，但是老年代不回收，新生代回收后频繁：

1. 解决方案：

   1. 打开详细GC日志，发现young gc 能正常回收，但是总内存减少不明显，发现问题出现在老年代
   1. dump下堆内存  看有没有humongous对象，发现没有，就不是大对象直接进入老年代导致的。
   1. 可能是年轻代通过 年龄晋升到老年代，就检查有没有耗时特别长的请求，在sls 日志平台中nginx 日志看有没有比较慢的请求，因为请求耗时长的话也会导致对象长期存活而年龄增加，发现普遍在5s以内，而young gc 的频率大于为1分钟一次，应该不是这个原因导致的
   1. 那么是不是s1 ,s2 区太小导致在young gc 的时候不太能存放存活的数据呢，查看JVM 确认发现年轻代太小导致的
   1. 最后通过调节jvm参数解决的这个问题

2. 最终采取的是

   ```
   -XX:InitiatingHeapOccupancyPercent=30
   -XX:G1NewSizePercent=30  (年轻代大小上限比例 默认 5～60)
   -XX:G1MaxNewSizePercent=50
   ```

‘

# 项目经验

## 项目描述：通过图表形式展示绩效的个人考核
项目实现：elactricsearch+mysql 形式来存储数据，负责数据结构设计，数据查询优化，数据定期校准。
为什么必须使用es查询，

es 大数据查询比较快，因为倒排索引能直接根据字段去定为文件。有聚合，排除等API,聚合的层次比较深，比如统计相同分数下这波人的评分分数。

难点在于：es 与mysql 数据出现不一致的情况。导致的原因是多线程同时操作es的一个文档时导致冲突写失败。

问题原因是：e s采用_seq_no 和 `_primary_term`来实现乐关锁。更新前先查询文档这两个字段，更新操作时携带着两个字段，比较文档的最新值与请求中的是否一致，一致就更新，不一致就跑出异常

解决方式有两个：

1. 在发生同步异常时，将错误的数据记录下来，发送到rabbitmq队列里面，由队列的消费者重新去更新es。 队列的先入先出就能保证一定顺序的。mq 开启了重试机制。
1. 定期对帐： 每天晚上通过xxl-job 比较mysql  与e s 里面的数据
1. 后面我发现有更好的实现：通过监听binlog 日志来实时推送给消费者，并且在es中进行版本控制保证消费有序



很有成就感的项目：

1. java代码的改造：情景是绩效环节 每个完成之后都有不同处理， 通过工厂模式根据环节去获取需要的处理类，这些类实现各自的工

   ，这些要处理的通过Order注解来排序。

2. 难点问题：

   + 影响访问大：可能导致正常的逻辑问题无法使用
     + 自测 ： 找测试同学要一个自动化脚本项目，跑一下自动化脚本 重点跑比较核心、代码改造过程中影响到的用例
     + code review : 与同组同学、组外同学讲一个怎么改造的
     + 同步与测试同学，对流程提交逻辑重点测一下	



工作难点：

两个线程同时操作一条记录的时候，导致前面的记录被覆盖掉



**面试前几分钟要了解公司薪资，位置，**

详细问题：

1. 公司的业务，后续开发做什么工作的，发展行情，技术栈
2. 薪资，加班情况，
3. 不需要关注北京、天津。工作地点都无所谓的







如果是具体问题的话，尽量使用流程图来回答。要有重试机制、错误机制、监控机制。不需要有具体实现的。

模版：针对这个问题，我想以流程图的形式展示。







mysql -> redis -> rabbitMq->Spring boot -> Spring cloud  ->  分布式 -> 综合
