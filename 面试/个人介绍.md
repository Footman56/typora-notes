# 个人介绍

面试官，你好，我是裴立志。我面试的是java后端工程师，我 精通的技能有springboot ，多线程， dubbo（为其他业务模块提供服务，同时也引用其他服务），

mysql、redis、elasticsearch、mongodb 数据库 并有数据库调优经验。（mysql 索引三个字段a,b,c 实际查询使用的是b,c，修改查询语句的。es调优：使用filter代替bool 查询，bool会计算分数，实际不需要只返回查询结构就可以啦。同时仅返回需要的字段） 

消息队列精通 rabbitmq ，

了解过分布式缓存，security安全框架

解决过 服务器内存压力告警，排除原因是慢sql 导致大量数据加载到内存中，解决方式是优化查询语句，增加更多的限制条件。

内存占比达到75%，但是老年代不回收，新生代回收后频繁：

1. 打开详细GC日志

2. dump 下堆内存 看有没有humongous对象

3. 解决方案：

   1. 降低Mixed GC 触发阈值 有45调小到30  让老年代早点回收
   2. 调大年轻代 ，降低younggc频率： -XX:G1NewSizePercent=30； -XX:G1MaxNewSizePercent=50
   3. 调大survior区  避免对象过早晋升： -XX:SurvivorRatio=6
   
4. 最终采取的是

   ```
   -XX:InitiatingHeapOccupancyPercent=30
   -XX:G1NewSizePercent=30  (年轻代大小上限比例 默认 5～60)
   -XX:G1MaxNewSizePercent=50
   ```

个人平时喜欢写文档，在学习一个新知识的时候，喜欢用笔记记录下来。

‘

# 项目经验

## 项目描述：通过图表形式展示绩效的个人考核
项目实现：elactricsearch+mysql 形式来存储数据，负责数据结构设计，数据查询优化，数据定期校准。
为什么必须使用es查询，

es 大数据查询比较快，因为倒排索引能直接根据字段去定为文件。有聚合，排除等API,聚合的层次比较深，比如统计相同分数下这波人的评分分数。

难点在于：es 与mysql 数据出现不一致的情况。导致的原因是多线程同时操作es的一个文档时导致冲突写失败。

问题原因是：e s采用_seq_no 和 `_primary_term`来实现乐关锁。更新前先查询文档这两个字段，更新操作时携带着两个字段，比较文档的最新值与请求中的是否一致，一致就更新，不一致就跑出异常

解决方式有两个：

1. 在发生同步异常时，将错误的数据记录下来，发送到rabbitmq队列里面，由队列的消费者重新去更新es。 队列的先入先出就能保证一定顺序的。mq 开启了重试机制。
1. 定期对帐： 每天晚上通过xxl-job 比较mysql  与e s 里面的数据

## 项目描述： 绩效主流程改造

项目：通过 为方案级/流程级的额外后置逻辑提供插件式扩展点（比如通知、抄送、统计等），解耦主流程与后续处理。          



**面试前几分钟要了解公司薪资，位置，**



详细问题：

1. 公司的业务，后续开发做什么工作的，发展行情，技术栈
2. 薪资，加班情况，
3. 不需要关注北京、天津。工作地点都无所谓的







如果是具体问题的话，尽量使用流程图来回答。要有重试机制、错误机制、监控机制。不需要有具体实现的。

模版：针对这个问题，我想以流程图的形式展示。


